<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sub-Tenancy Agreement ‚Äî Flat 1, 61 Caledonian Crescent</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="public/css/glass.css">
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <script type="module" src="./js/firebase-init.js"></script>
</head>
<body id="top">
  <header class="header" role="banner">
    <div class="header-inner">
      <img class="header-logo" src="assets/front61.png" alt="Sub-Tenancy Portal logo">
      <div style="flex:1 1 auto;">
        <h1>Sub-Tenancy Agreement</h1>
        <p class="subtitle">Property: Flat 1, 61 Caledonian Crescent, Edinburgh ‚Ä¢ Lead tenant: David Martin ‚Ä¢ Managing agent: Milard‚Äôs Property Management</p>
      </div>
      <span id="saveIndicator" class="save-indicator" aria-live="polite"></span>
    </div>
  </header>

  <main>
    <div class="container">
      <nav class="glass-nav" aria-label="Agreement navigation">
        <a href="#details" aria-current="true">Details</a>
        <a href="#subtenants">Sub-tenants</a>
        <a href="#signatures">Signatures</a>
        <a href="#preview">Preview</a>
      </nav>

      <div class="banner tip" role="note">
        üí° Tip: Export as PDF from your browser‚Äôs print dialog, then click ‚ÄúEmail David‚Äù to open a draft email.
      </div>

      <form id="agreementForm" novalidate>
        <div class="sections-grid" aria-label="Form sections">
        <section id="details" class="card" aria-labelledby="section-details">
          <h2 id="section-details">Parties and Tenancy Details</h2>
          <div class="hr"></div>

          <div class="row">
            <div>
              <label for="agreeDate" class="required">Date of Agreement</label>
              <input id="agreeDate" type="date" aria-required="true">
              <div id="errAgreeDate" class="error" role="alert">Please provide the agreement date.</div>
            </div>
            <div>
              <label for="startDate" class="required">Start Date</label>
              <input id="startDate" type="date" aria-required="true">
              <div id="errStartDate" class="error" role="alert">Please provide a start date.</div>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="tenantName">Lead Tenant (fixed)</label>
              <input id="tenantName" type="text" value="David Martin" readonly aria-readonly="true">
              <span class="hint">This cannot be changed.</span>
            </div>
            <div>
              <label for="agent">Managing Agent (fixed)</label>
              <input id="agent" type="text" value="Milard‚Äôs Property Management" readonly aria-readonly="true">
            </div>
          </div>

          <div class="row">
            <div>
              <label for="rent" class="required">Monthly Rent (¬£)</label>
              <input id="rent" type="number" value="750" min="0" step="1" aria-required="true">
              <div id="errRent" class="error" role="alert">Rent must be at least ¬£1.</div>
            </div>
            <div>
              <label for="rentDay" class="required">Rent Due Day</label>
              <select id="rentDay" aria-required="true"></select>
            </div>
          </div>

          <div class="toolbar">
            <button class="btn primary" id="btnGenerate" type="submit">Generate Agreement</button>
            <button class="btn" id="btnEmail" type="button">Email David</button>
            <button class="btn" id="btnClear" type="button">Clear Form</button>
          </div>
        </section>

        <section id="subtenants" class="card" aria-labelledby="section-subtenants">
          <h2 id="section-subtenants">Sub-tenants</h2>
          <div class="hr"></div>

          <div class="subtenants-header">
            <p class="hint">You can have one or two people. The first sub-tenant is required; the second is optional.</p>
            <div class="actions">
              <button class="btn ghost" id="btnAddSub" type="button">Add sub-tenant</button>
              <button class="btn ghost" id="btnRemoveSub" type="button">Remove last</button>
            </div>
          </div>

          <div id="subsContainer"></div>
        </section>

        <section id="signatures" class="card" aria-labelledby="section-signatures">
          <h2 id="section-signatures">Signatures</h2>
          <div class="hr"></div>
          <p class="hint">Each sub-tenant gets their own signature pad. Draw slowly for quality or upload a PNG/JPG. Use ‚ÄúStamp time‚Äù to add a UK timestamp.</p>

          <div id="sigContainer"></div>

          <div class="hr"></div>

          <div>
            <label>Lead Tenant Signature (David Martin)</label>
            <div class="sig-pad"><canvas id="sigTenant"></canvas></div>
            <div class="sig-tools">
              <button class="btn" id="sigTenantClear" type="button">Clear</button>
              <button class="btn" id="sigTenantStamp" type="button">Stamp time</button>
              <span id="sigTenantTime" class="hint" aria-live="polite">No timestamp yet</span>
            </div>
            <div class="upload">
              <input id="sigTenantUpload" type="file" accept="image/*" aria-label="Upload lead tenant signature image">
              <span class="hint">Upload PNG or JPG</span>
            </div>
          </div>

          <div class="hr"></div>

          <div class="row">
            <div>
              <label for="witName">Witness name (optional)</label>
              <input id="witName" type="text">
            </div>
            <div>
              <label>Witness Signature (optional)</label>
              <div class="sig-pad"><canvas id="sigWitness"></canvas></div>
              <div class="sig-tools">
                <button class="btn" id="sigWitClear" type="button">Clear</button>
                <button class="btn" id="sigWitStamp" type="button">Stamp time</button>
                <span id="sigWitTime" class="hint" aria-live="polite">No timestamp yet</span>
              </div>
              <div class="upload">
                <input id="sigWitUpload" type="file" accept="image/*" aria-label="Upload witness signature image">
                <span class="hint">Upload PNG or JPG</span>
              </div>
            </div>
          </div>

          <div class="toolbar">
            <button class="btn primary" id="btnPrint" type="button">Export as PDF</button>
          </div>
        </section>

        <section id="preview" class="agreement card" aria-label="Agreement Preview">
          <h3>Sub-Tenancy Agreement for Room Rental</h3>
          <p><strong>Property:</strong> Flat 1, 61 Caledonian Crescent, Edinburgh</p>
          <div class="divider"></div>

          <p>This Sub-Tenancy Agreement (‚Äúthe Agreement‚Äù) is made on <span data-bind="agreeDate">[Date]</span> between:</p>
          <ol class="party-list">
            <li><strong><span data-bind="tenantName">David Martin</span></strong> (‚Äúthe Tenant‚Äù or ‚Äúlead tenant‚Äù), the primary tenant and current occupier who rents the property from the landlord through <span data-bind="agent">Milard‚Äôs Property Management</span> and has written permission to sub-let one room in the property; and</li>
            <li><strong><span data-bind="subTenant0">[Sub-Tenant full name]</span></strong> (‚Äúthe Sub-Tenant‚Äù), of <span data-bind="subTenantAddr0">[Sub-Tenant address]</span>.<br>
                <span data-if="hasSub1">If applicable: <strong><span data-bind="subTenant1">[Co-Sub-Tenant full name]</span></strong> (‚Äúthe Co-Sub-Tenant‚Äù), of <span data-bind="subTenantAddr1">[Co-Sub-Tenant address]</span>.</span>
            </li>
          </ol>
          <p>Where a Co-Sub-Tenant resides with the Sub-Tenant, both individuals agree to comply with all terms of this Agreement and are jointly and severally responsible for rent, conduct, and any damage caused by them or their guests (fair wear and tear excepted).</p>

          <h4>1. Property and Facilities</h4>
          <p>The property is a two-bedroom ground-floor flat. The Sub-Tenant rents one private bedroom for exclusive use. Shared areas with the Tenant include the kitchen, living room, shower/toilet, and garden. Communal facilities include the central garden, heated pool, gym, and sauna (access provided via the factor fee).</p>

          <h4>2. Term</h4>
          <p>The Agreement begins on <span data-bind="startDate">[Start Date]</span> and continues on a monthly basis until ended under Section 12.</p>

          <h4>3. Rent and Payment Method</h4>
          <ul>
            <li>Monthly rent is <strong>¬£<span data-bind="rent">750</span></strong> for the private room and shared/communal access.</li>
            <li>Rent is due on or before the <strong><span data-bind="rentDayOrdinal">[Due Day]</span></strong> of each month and is payable to <span data-bind="tenantName">David Martin</span>.</li>
            <li>Payment details: Account name: David Martin. Account number: 70629995. Sort code: 20-33-96. Reference: Your full name.</li>
            <li>A standing order is recommended to ensure payments are on time.</li>
            <li>The rent includes the factor fee for communal facilities and estate maintenance. The lead tenant continues to pay the full property rent to the landlord/agent.</li>
            <li>If rent is unpaid when due, the Tenant may issue notice requiring payment or removal and may apply to court for payment or removal.</li>
          </ul>

          <h4>4. Initial Payments (in place of a deposit)</h4>
          <p>The Sub-Tenant(s) agree to pay first and last month‚Äôs rent upfront on signing. The initial total is ¬£<span data-bind="initTotal">1500</span>. The last month‚Äôs rent is applied to the final month of the tenancy. After departure, reasonable charges for any damage beyond fair wear and tear, professional cleaning if required, or unpaid utilities may be recovered. Receipts or reasonable evidence will be provided for any such deductions. Any remaining balance will be returned to the Sub-Tenant(s).</p>

          <h4>5. Utilities and Council Tax</h4>
          <p>Electricity and council tax will be split equally between the Tenant and the Sub-Tenant(s). These costs are in addition to rent and payable promptly when billed.</p>

          <h4>6. Access to Facilities</h4>
          <p>Access to the pool, gym, and sauna is included within the rent. Opening hours are 05:30 to 23:00 daily. House rules and further details are available at <a href="https://www.james-square.com" target="_blank" rel="noopener noreferrer">james-square.com</a>.</p>

          <h4>7. Access and Privacy</h4>
          <p>The Tenant will not access a Sub-Tenant‚Äôs private room without consent and at least 24 hours‚Äô notice, except in emergencies such as fire, flood, or gas leak. The Sub-Tenant(s) will permit reasonable access for safety checks and repairs with at least 24 hours‚Äô notice, emergencies excepted.</p>

          <h4>8. Inventory and Condition</h4>
          <p>An inventory for the room and shared areas will be completed at the start. The Sub-Tenant(s) have 7 days to raise discrepancies. On leaving, the room and shared areas must be clean and undamaged, allowing for fair wear and tear.</p>

          <h4>9. House Rules</h4>
          <ul>
            <li>No smoking in the flat or communal internal areas.</li>
            <li>Vaping is permitted if done considerately and with windows open.</li>
            <li>No substance misuse or illegal drugs on the premises.</li>
            <li>Keep shared areas tidy after use and dispose of rubbish and recycling correctly.</li>
            <li>Be respectful towards the Tenant, neighbours, and residents. No antisocial behaviour.</li>
            <li>No large gatherings or parties. Keep noise to reasonable levels, especially 22:00‚Äì07:00.</li>
            <li>No pets without prior written consent from the Tenant.</li>
            <li>Guests are permitted. Please communicate plans to the Tenant in advance for general awareness. No additional long-term occupiers without agreement.</li>
            <li>Use the Wi-Fi/Internet for lawful purposes only. Do not download or share illegal or indecent content.</li>
          </ul>

          <h4>10. Reporting Issues</h4>
          <p>Any issues, damages, or maintenance needs must be reported first to the lead tenant, David Martin, who will contact the property management company as required.</p>

          <h4>11. Repairs and Safety</h4>
          <p>Report maintenance issues promptly. Do not tamper with smoke/heat alarms or any safety devices. Report faults immediately.</p>

          <h4>12. Ending the Agreement</h4>
          <ul>
            <li>Either party may end this Agreement by giving at least <span data-bind="notice">28 days</span> written notice. Four to six weeks‚Äô notice is preferred where possible.</li>
            <li>On leaving, return all keys/fobs and leave the room and shared areas clean and undamaged, allowing for fair wear and tear.</li>
          </ul>

          <h4>13. Insurance</h4>
          <p>Sub-Tenant(s) are responsible for insuring their own personal belongings and effects.</p>

          <h4>14. Data Protection</h4>
          <p>Basic contact and tenancy details will be held by the Tenant and shared with the landlord/agent only for legitimate tenancy purposes.</p>

          <h4>15. General</h4>
          <p>This Agreement constitutes the entire understanding between the parties and supersedes prior agreements. Any amendments must be in writing and signed by both parties. This Agreement is governed by the laws of Scotland. The parties will attempt to resolve disputes amicably before formal action.</p>

          <div class="divider"></div>

          <h4>Acceptance</h4>
          <p>By signing below, the Sub-Tenant(s) confirm they have read and understood this Agreement, agree to pay ¬£<span data-bind="initTotal">1500</span> upfront (first and last month‚Äôs rent), then ¬£<span data-bind="rent">750</span> on or before the <span data-bind="rentDayOrdinal">[Due Day]</span> of each month, agree to split utilities and council tax equally, will follow the house rules, and will provide at least 28 days‚Äô written notice before ending the tenancy.</p>

          <div class="signing" id="signingSubs"></div>

          <div class="signing">
            <div class="sig-block">
              <p><strong>Lead Tenant:</strong> <span data-bind="tenantName">David Martin</span></p>
              <img id="imgTenant" class="sig-img" alt="Lead tenant signature">
              <div class="sig-line"></div>
              <div class="printed-name">Printed name: <span data-bind="tenantName">David Martin</span></div>
              <p class="stamp">Signed and dated: <span id="stampTenant">[Signature and UK timestamp]</span></p>
            </div>
            <div class="sig-block">
              <p><strong>Witness (optional):</strong> <span id="bindWitName">[Witness]</span></p>
              <img id="imgWit" class="sig-img" alt="Witness signature">
              <div class="sig-line"></div>
              <div class="printed-name">Printed name: <span id="bindWitName2">[Witness]</span></div>
              <p class="stamp">Signed and dated: <span id="stampWit">[Signature and UK timestamp]</span></p>
            </div>
          </div>
        </section>
        </div>

        <div class="toolbar toolbar-bottom">
          <a class="btn link" id="btnScrollTop" href="#top">Back to form</a>
          <button class="btn" id="btnEmailBottom" type="button">Email David</button>
          <button class="btn primary" id="btnPrint2" type="button">Export as PDF</button>
          <a class="btn" href="index.html">Home</a>
        </div>

        <div class="actions-mobile" role="group" aria-label="Quick actions">
          <button class="btn primary" type="button" onclick="handleGenerate()">Generate</button>
          <button class="btn" type="button" onclick="handlePrint()">Export PDF</button>
          <button class="btn" type="button" onclick="handleEmail()">Email David</button>
        </div>
      </form>
    </div>
  </main>

  <footer class="footer">
    <small>Last updated: 8¬†November¬†2025</small>
  </footer>

  <script type="module" src="./js/save-agreement.js"></script>
  <script src="js/agreement.js" type="module"></script>
</body>
</html>
