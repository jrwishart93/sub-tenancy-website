<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sub-Tenancy Agreement ‚Äî Flat 1, 61 Caledonian Crescent</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="public/css/glass.css">
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <script type="module" src="./js/firebase-init.js"></script>
</head>
<body id="top">
  <div class="page">
    <header class="page-header" role="banner">
      <div class="page-header__inner">
        <a class="page-header__logo" href="index.html" aria-label="Return to sub-tenancy home">
          <img src="assets/front61.png" alt="Number 61 front door logo" class="header-logo">
        </a>
        <div class="page-header__titles" style="flex:1 1 auto;">
          <h1>Sub-Tenancy Agreement</h1>
          <p class="subtitle">Property: Flat 1, 61 Caledonian Crescent, Edinburgh ‚Ä¢ Lead tenant: David Martin ‚Ä¢ Managing agent: Milard‚Äôs Property Management</p>
        </div>
        <span id="saveIndicator" class="save-indicator" aria-live="polite"></span>
      </div>
    </header>

    <main>
      <div class="page-container">
        <nav class="tabs" aria-label="Agreement navigation">
          <a class="tab-button" href="#details" aria-current="true">Details</a>
          <a class="tab-button" href="#subtenants">Sub-tenants</a>
          <a class="tab-button" href="#signatures">Signatures</a>
          <a class="tab-button" href="#preview">Preview</a>
        </nav>

        <div class="banner tip" role="note">
          üí° Tip: Export as PDF from your browser‚Äôs print dialog, then click ‚ÄúEmail David‚Äù to open a draft email.
        </div>

        <form id="agreementForm" novalidate>
          <div class="form-layout" aria-label="Agreement builder layout">
            <div class="form-column" aria-label="Agreement form">
              <section id="details" class="card form-section" aria-labelledby="section-details">
                <h2 id="section-details">Parties and Tenancy Details</h2>
                <div class="hr"></div>

                <div class="row">
                  <div class="form-field">
                    <label for="agreementDate" class="required">Agreement Date</label>
                    <input id="agreementDate" type="date" aria-required="true" aria-describedby="errAgreementDate">
                    <div id="errAgreementDate" class="error" role="alert">Please provide the agreement date.</div>
                  </div>
                  <div class="form-field">
                    <label for="signatureDate" class="required">Signature Date</label>
                    <input id="signatureDate" type="date" aria-required="true" aria-describedby="errSignatureDate">
                    <div id="errSignatureDate" class="error" role="alert">Please provide the signature date.</div>
                  </div>
                </div>

                <div class="row">
                  <div class="form-field">
                    <label for="moveInDate" class="required">Move-In Date</label>
                    <input id="moveInDate" type="date" value="2025-11-29" aria-required="true" aria-describedby="errMoveInDate">
                    <div id="errMoveInDate" class="error" role="alert">Please provide the move-in date.</div>
                  </div>
                </div>

                <div class="row">
                  <div class="form-field">
                    <label for="tenantName">Lead Tenant (fixed)</label>
                    <input id="tenantName" type="text" value="David Martin" readonly aria-readonly="true">
                    <span class="hint">This cannot be changed.</span>
                  </div>
                  <div class="form-field">
                    <label for="agent">Managing Agent (fixed)</label>
                    <input id="agent" type="text" value="Milard‚Äôs Property Management" readonly aria-readonly="true">
                  </div>
                </div>

                <div class="row">
                  <div class="form-field">
                    <label for="rent" class="required">Monthly Rent (¬£)</label>
                    <input id="rent" type="number" value="750" min="1" step="1" aria-required="true" aria-describedby="errRent">
                    <div id="errRent" class="error" role="alert">Rent must be at least ¬£1.</div>
                  </div>
                  <div class="form-field">
                    <label for="rentDueDate" class="required">Rent Due Day</label>
                    <input id="rentDueDate" type="number" min="1" max="28" value="1" readonly aria-required="true" aria-describedby="errRentDueDate">
                    <div id="errRentDueDate" class="error" role="alert">Rent due date is required.</div>
                  </div>
                </div>

                <div class="toolbar button-row">
                  <button class="btn" id="btnGenerate" type="submit">Generate Agreement</button>
                  <button class="btn btn-secondary" id="btnEmail" type="button">Email David</button>
                  <button class="btn btn-secondary" id="btnClear" type="button">Clear Form</button>
                </div>
              </section>

              <section id="subtenants" class="card form-section" aria-labelledby="section-subtenants">
                <h2 id="section-subtenants">Sub-tenants</h2>
                <div class="hr"></div>

                <div class="subtenants-header">
                  <p class="hint">You can have one or two people. The first sub-tenant is required; the second is optional.</p>
                  <div class="actions button-row">
                    <button class="btn ghost" id="btnAddSub" type="button">Add another sub-tenant</button>
                    <button class="btn ghost" id="btnRemoveSub" type="button">Remove last sub-tenant</button>
                  </div>
                </div>

                <div id="subsContainer"></div>
              </section>

              <section id="signatures" class="card form-section" aria-labelledby="section-signatures">
              <h2 id="section-signatures">Signatures</h2>
              <div class="hr"></div>
              <p class="hint">Each sub-tenant gets their own signature pad. Draw slowly for quality or upload a PNG/JPG. Use ‚ÄúStamp time‚Äù to add a UK timestamp.</p>

              <div id="sigContainer"></div>

              <div class="hr"></div>

              <div class="form-field">
                <label>Lead Tenant Signature (David Martin)</label>
                <div class="sig-pad"><canvas id="sigTenant"></canvas></div>
                <div class="sig-tools button-row">
                  <button class="btn" id="sigTenantClear" type="button">Clear</button>
                  <button class="btn" id="sigTenantStamp" type="button">Stamp time</button>
                  <span id="sigTenantTime" class="hint" aria-live="polite">No timestamp yet</span>
                </div>
                <div class="upload">
                  <label class="file-label" for="sigTenantUpload">Upload signature image</label>
                  <input id="sigTenantUpload" type="file" accept="image/*">
                  <span class="hint">Upload PNG or JPG</span>
                </div>
              </div>

              <div class="hr"></div>
              <div class="toolbar button-row">
                <button class="btn" id="btnPrint" type="button">Export as PDF</button>
              </div>
            </section>

          </div>
          <aside class="preview-column" aria-label="Agreement preview">
            <section id="preview" class="agreement card" aria-label="Agreement Preview">
              <section id="agreement-preview" class="agreement-card">
                <h3>Sub-Tenancy Agreement for Room Rental</h3>
                <p><strong>Property:</strong> Flat 1, 61 Caledonian Crescent, Edinburgh</p>
                <div class="divider"></div>

                <p>This Sub-Tenancy Agreement (‚Äúthe Agreement‚Äù) is made on <span data-bind="agreementDate">[Date]</span> between:</p>
                <ol class="party-list">
                  <li><strong><span data-bind="tenantName">David Martin</span></strong> (‚Äúthe Tenant‚Äù or ‚Äúlead tenant‚Äù), the primary tenant and current occupier who rents the property from the landlord through <span data-bind="agent">Milard‚Äôs Property Management</span> and has written permission to sub-let one room in the property; and</li>
                  <li><strong><span data-bind="subTenant0">[Sub-Tenant full name]</span></strong> (‚Äúthe Sub-Tenant‚Äù), of <span data-bind="subTenantAddr0">[Sub-Tenant address]</span>.</li>
                </ol>

                <h4>1. Property and Facilities</h4>
                <p>The property is a two-bedroom ground-floor flat. The Sub-Tenant rents one private bedroom for exclusive use. Shared areas with the Tenant include the kitchen, living room, shower/toilet, and garden. Communal facilities include the central garden, heated pool, gym, and sauna (access provided via the factor fee). Both the Tenant and Sub-Tenant agree to look after all shared areas, keeping them reasonably clean, tidy and well maintained throughout the tenancy.</p>

                <h4>2. Term</h4>
                <p>The Agreement begins on <span data-bind="moveInDate">[Move-In Date]</span> and continues on a monthly basis until ended under Section 12.</p>

                <h4>3. Rent and Payment Method</h4>
                <ul>
                  <li>Monthly rent is <strong>¬£<span data-bind="rent">750</span></strong> for the private room and shared/communal access.</li>
                  <li>Rent is due on or before the <strong><span data-bind="rentDueDateOrdinal">[Due Day]</span></strong> of each month and is payable to <span data-bind="tenantName">David Martin</span>.</li>
                  <li>Payment details: Account name: David Martin. Account number: 70629995. Sort code: 20-33-96. Reference: Your full name.</li>
                  <li>A standing order is recommended to ensure payments are on time.</li>
                  <li>The rent includes the building factor fee for communal facilities and estate maintenance. The landlord and managing agent continue to pay the factor directly; the Sub-Tenant does not pay this separately. The lead tenant continues to pay the full property rent to the landlord/agent.</li>
                  <li>If rent is unpaid when due, the Tenant may issue notice requiring payment or removal and may apply to court for payment or removal.</li>
                </ul>

                <h4>4. Initial Payments (no deposit)</h4>
                <p>The Sub-Tenant agrees to pay first and last month‚Äôs rent upfront on signing. The initial total is ¬£<span data-bind="initTotal">1500</span>. There is no separate tenancy deposit. The last month‚Äôs rent is applied to the final month of the tenancy.</p>

                <p>Rent is charged by whole calendar month and is not refunded pro-rata. If the Sub-Tenant chooses to leave part-way through a paid month, or leave before the end of the required 28 days‚Äô notice period, the rent already paid for that month will remain payable in full.</p>

                <p>After departure at the end of the tenancy, reasonable charges for any damage beyond fair wear and tear, professional cleaning if required, or unpaid utilities may be recovered from rent paid in advance. Receipts or reasonable evidence will be provided for any such deductions, and any remaining balance will be returned to the Sub-Tenant.</p>

                <h4>5. Utilities and Council Tax</h4>
                <p>Electricity and council tax will be split equally between the Tenant and the Sub-Tenant. These costs are in addition to rent and payable promptly when billed.</p>

                <h4>6. Access to Facilities</h4>
                <p>Access to the pool, gym, and sauna is included within the rent. Opening hours are 05:30 to 23:00 daily. House rules and further details are available at <a href="https://www.james-square.com" target="_blank" rel="noopener noreferrer">james-square.com</a>.</p>

                <h4>7. Access and Privacy</h4>
                <p>The Tenant will not access a Sub-Tenant‚Äôs private room without consent and at least 24 hours‚Äô notice, except in emergencies such as fire, flood, or gas leak. The Sub-Tenant will permit reasonable access for safety checks and repairs with at least 24 hours‚Äô notice, emergencies excepted.</p>

                <h4>8. Inventory and Condition</h4>
                <p>An inventory for the room and shared areas will be completed at the start. The Sub-Tenant has 7 days to raise discrepancies. On leaving, the room and shared areas must be clean and undamaged, allowing for fair wear and tear.</p>

                <h4>9. House Rules</h4>
                <ul>
                  <li>No smoking in the flat or communal internal areas.</li>
                  <li>Vaping is permitted if done considerately and with windows open.</li>
                  <li>No substance misuse or illegal drugs on the premises.</li>
                  <li>Keep shared areas tidy after use and dispose of rubbish and recycling correctly.</li>
                  <li>Be respectful towards the Tenant, neighbours, and residents. No antisocial behaviour.</li>
                  <li>No large gatherings or parties. Keep noise to reasonable levels, especially 22:00‚Äì07:00.</li>
                  <li>No pets without prior written consent from the Tenant.</li>
                  <li>Guests are permitted. Please communicate plans to the Tenant in advance for general awareness. No additional long-term occupiers without agreement.</li>
                  <li>Use the Wi-Fi/Internet for lawful purposes only. Do not download or share illegal or indecent content.</li>
                </ul>

                <h4>10. Reporting Issues</h4>
                <p>Any issues, damages, safety concerns or maintenance needs must be reported first to the lead tenant, David Martin, who will immediately pass details to the managing / estate agent so that appropriate repairs or safety checks can be arranged.</p>

                <h4>11. Repairs and Safety</h4>
                <p>Report maintenance issues promptly. Do not tamper with smoke/heat alarms or any safety devices. Report faults immediately.</p>

                <p>The lead tenant will liaise with the managing / estate agent on all repair and safety matters. The landlord does not normally deal directly with the Sub-Tenant.</p>

                <h4>12. Ending the Agreement</h4>
                <ul>
                  <li>Either party may end this Agreement by giving at least <span data-bind="notice">28 days</span> written notice. Four to six weeks‚Äô notice is preferred where possible.</li>
                  <li>On leaving, return all keys/fobs and leave the room and shared areas clean and undamaged, allowing for fair wear and tear.</li>
                  <li>Rent is payable by full calendar month. Where the Sub-Tenant chooses to leave during a month that has already been paid for, no pro-rata refund of that month‚Äôs rent will be due.</li>
                </ul>

                <h4>13. Insurance</h4>
                <p>The Sub-Tenant is responsible for insuring their own personal belongings and effects.</p>

                <h4>14. Data Protection</h4>
                <p>Basic contact and tenancy details will be held by the Tenant and shared with the landlord/agent only where this is necessary for legitimate tenancy or property management purposes.</p>

                <h4>15. General</h4>
                <p>This Agreement constitutes the entire understanding between the parties and supersedes prior agreements. Any amendments must be in writing and signed by both parties. This Agreement is governed by the laws of Scotland. The parties will attempt to resolve disputes amicably before formal action.</p>

                <p>The landlord and managing agent are not parties to this Sub-Tenancy Agreement. Day-to-day issues and communications under this Agreement are between the lead tenant and the Sub-Tenant, except where the law requires the landlord or managing agent to become involved.</p>

                <div class="divider"></div>

                <h4>Acceptance</h4>
                <p>By signing below, the Sub-Tenant confirms they have read and understood this Agreement, agree to pay ¬£<span data-bind="initTotal">1500</span> upfront (first and last month‚Äôs rent, with no separate deposit), then ¬£<span data-bind="rent">750</span> on or before the <span data-bind="rentDueDateOrdinal">[Due Day]</span> of each month, agree to split utilities and council tax equally, will follow the house rules, and will provide at least 28 days‚Äô written notice before ending the tenancy.</p>

                <div class="form-section">
                  <div class="form-field">
                    <label>Lead tenant signature</label>
                    <div id="leadTenantSignature" class="signature-display">David Martin</div>
                  </div>

                  <div class="form-field">
                    <label for="subTenantName">Sub-Tenant name</label>
                    <input id="subTenantName" type="text" />
                  </div>

                  <div class="form-field">
                    <label for="subTenantSignature">Sub-Tenant signature</label>
                    <input id="subTenantSignature" type="text" />
                  </div>

                  <div class="form-field">
                    <label for="subTenantSignatureDate">Sub-Tenant signature date</label>
                    <input id="subTenantSignatureDate" type="date" />
                  </div>
                </div>

                <div id="acceptancePreview" class="form-section"></div>

                <p><strong>Signature Date:</strong> <span data-bind="signatureDate">[Signature Date]</span></p>

                <div class="signing" id="signingSubs"></div>

                <div class="signing">
                  <div class="sig-block">
                    <p><strong>Lead Tenant:</strong> <span data-bind="tenantName">David Martin</span></p>
                    <img id="imgTenant" class="sig-img" alt="Lead tenant signature">
                    <div class="sig-line"></div>
                    <div class="printed-name">Printed name: <span data-bind="tenantName">David Martin</span></div>
                    <p class="stamp">Signed and dated: <span id="stampTenant">[Signature and UK timestamp]</span></p>
                  </div>
                </div>
              </section>
            </section>
          </aside>
        </div>

        <div class="toolbar toolbar-bottom button-row">
          <a class="btn link" id="btnScrollTop" href="#top">Back to form</a>
          <button class="btn" id="btnEmailBottom" type="button">Email David</button>
          <button class="btn primary" id="export-pdf-button" type="button">Export as PDF</button>
          <a class="btn" href="index.html">Home</a>
        </div>

        <div class="actions-mobile" role="group" aria-label="Quick actions">
          <button class="btn primary" type="button" onclick="handleGenerate()">Generate</button>
          <button class="btn" type="button" onclick="handlePrint()">Export PDF</button>
          <button class="btn" type="button" onclick="handleEmail()">Email David</button>
        </div>
      </form>
    </div>
  </main>

  <footer class="page-footer">
    <small>Last updated: 8¬†November¬†2025</small>
  </footer>
  </div>

  <script type="module" src="./js/save-agreement.js"></script>
  <script src="js/agreement.js" type="module"></script>
</body>
</html>
